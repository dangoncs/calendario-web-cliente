<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Calendário</title>
        <meta name="description" content="Trabalho da disciplina Desenvolvimento Web Cliente">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <header>
            <img src="assets/IdentidadeVisualUTFPR.png" class="logo-utfpr" alt="Logo UTFPR">
            <h1>|</h1>
            <img src="assets/calendar.png" alt="Logo Calendario">
        </header>
        <nav>
            <ul>
                <li><a href="#calendar">Calendário</a></li>
                <li><a href="#timeline">Linha do Tempo</a></li>
            </ul>
        </nav>
        <main>
            <div class="main-container">
                <section id="timeline">
                    <h2>Linha do Tempo</h2>
                    <div class="timeline">
                        
                        </div>
                </section>

                <aside id="event-form-container">
                    <h3>Adicionar Novo Evento</h3>
                    <form id="add-event-form">
                        <div class="form-group">
                            <label for="event-name">Nome do Evento:</label>
                            <input type="text" id="event-name" name="event-name" required>
                        </div>
                        <div class="form-group">
                            <label for="event-date">Data:</label>
                            <input type="date" id="event-date" name="event-date" required>
                        </div>
                        <div class="form-group">
                            <label for="event-time">Horário:</label>
                            <input type="time" id="event-time" name="event-time" required>
                        </div>
                        <button type="submit">Adicionar Evento</button>
                    </form>
                </aside>
            </div>
        </main>
        <footer>
            <p>footer</p>
            <a href="#">Sobre</a>
        </footer>
        <script>
            document.addEventListener('DOMContentLoaded', function() {

                const form = document.getElementById('add-event-form');
                const timelineContainer = document.querySelector('#timeline .timeline');

                // array que guarda todos os eventos
                let events = [

                ];

                // função que atualiza a timeline (chamada sempre que um evento é adicionado)
                function renderTimeline() {
                    // Limpa a timeline
                    timelineContainer.innerHTML = '';

                    // Ordena os eventos: do mais próximo (menor data) para o mais distante (maior data)
                    events.sort((a, b) => a.datetime - b.datetime);

                    //Cria e adiciona cada item do evento no HTML
                    events.forEach(event => {

                        //Formata a data e a hora para exibição
                        const day = String(event.datetime.getDate()).padStart(2, '0');
                        const month = String(event.datetime.getMonth() + 1).padStart(2, '0'); 
                        const year = event.datetime.getFullYear();
                        const hours = String(event.datetime.getHours()).padStart(2, '0');
                        const minutes = String(event.datetime.getMinutes()).padStart(2, '0');
                        
                        const formattedDate = `${day}/${month}/${year}`;
                        const formattedTime = `${hours}:${minutes}`;

                        const timelineItem = document.createElement('div');
                        timelineItem.classList.add('timeline-item');
                        
                        timelineItem.innerHTML = `
                            <div class="content">
                                <div class="date">${formattedDate} - ${formattedTime}</div>
                                <div>${event.name}</div>
                            </div>
                        `;
                        timelineContainer.appendChild(timelineItem);
                    });
                }

                // evento do formulario para adicionar um novo evento
                form.addEventListener('submit', function(event) {
                    event.preventDefault();

                    const eventName = document.getElementById('event-name').value;
                    const eventDate = document.getElementById('event-date').value;
                    const eventTime = document.getElementById('event-time').value;

                    const newEventDatetime = new Date(`${eventDate}T${eventTime}`);

                    events.push({
                        name: eventName,
                        datetime: newEventDatetime
                    });

                    // atualiza a timeline
                    renderTimeline();

                    form.reset();
                });

                renderTimeline();
            });
        </script>
    </body>
</html>